summary: Zadig 新手快速入门课程 T100
id: t100
categories: training
environments: Web
status: Published
authors: Martin Liu
Feedback Link:  https://github.com/koderover/zadig-bootcamp/issues

# Zadig 新手快速入门课程 T100
<!-- ------------------------ -->


## 准备环境
Duration: 2

### 概述

前提条件：

1. 准备 Zadig 试用环境：[在线试用](https://koderover.com/trial)或者[下载安装](https://koderover.com/installer)。
2. 将示例代码 Fork 到个人账户中，为变更这套代码做好准备。
3. 在 GitLab 中创建用于代码仓库集成接入的应用认证密钥。

### 示例应用代码

本课程基于一套可以运行的云原生微服务系统，该应用系统的架构图如下：

![系统架构图](images/2023-10-16_22-35-34.jpg)

* 前端：只有一个页面，该页面上显示着两条动态的信息：前端程序构建的时间戳，后端服务构建的时间戳（通过调用后端 /api/buildstamp 接口获得）
* 后端：运行在 20219 端口上，由几个简单的示例 api 组成。
* 前后端是松耦合的结构，前后端开发人员可以在同一套环境中各自独立开发迭代。

代码库位于：<https://gitlab.com/kr-poc/zadig-training.git>

操作说明：

1. 访问并登录 [GitLab](https://gitlab.com) 个人账户。没有账号的注册一个。
2. 将示例代码库 Fork 到自己的账户中。

### 创建 GitLab 集成密钥

参考文档：<<https://docs.koderover.com/zadig/settings/codehost/gitlab/> >

创建过程中需要填写 Zadig 的回调网址：

`https://course.koderover.com/api/directory/codehosts/callback`

创建成功的应用认证密钥，如下图所示：

![GitLab Auth key](images/2023-10-16_23-01-57.jpg)

将 `Application ID` 和 `Secret` 复制在写字板中备用。

### 验收检查

1. 个人 GitLab 账户中具有 `Zadig-training` 示例代码库。
2. 创建好的 GitLab 应用集成密钥对。
3. 点击 NEXT 进入下个章节。

<!-- ------------------------ -->
## 初始化项目
Duration: 3

### 学习目标
* 为一个多服务的产品创建研发流程中所需要的各种环境
* 配置项目运行环境，同时兼容各种 K8s 的项目风格，兼容主机（单一操作系统）的运行环境
* 创建必要的隔离不同类型工作的工作流，如 dev、qa 和 ops 等。
* 集成新的产品源代码仓库(自己上一步准备好的个人代码仓库)

### 操作流程

用学员账号成功登录 Zadig 系统后，即可以开始下面的操作。

![新建项目](images/2023-10-17_09-57-22.jpg)

1. 点击左侧的 “项目” 菜单，进入项目管理界面。
2. 点击右上角的 “新建项目” 按钮。

![](images/2023-10-17_10-00-46.jpg)
1. 填写项目名称
2. 填写项目描述
3. 选择 “K8s YAML 项目”，课程所使用的是这个风格的微服务系统，也支持 Helm Chart 类型；也可以接管当前已经运行着 K8s 微服务项目的 K8s 集群；同时支持基于主机运行的软件项目。
4. 点击高级配置，查看项目的高级配置选项。在指定集群中显示了当前 Zadig 系统所对接的 K8s 集群环境，例如：用于对应开发、测试、预生产、生产等不同环境。
5. 点击 “立即新建” 按钮，开始项目初始向导。

![](images/2023-10-17_10-02-38.jpg)

查看 Zadig 为本项目默认准备的初始环境和工作流，包含两套环境和三条工作流。

1. 点击 “下一步” 按钮，继续后续项目定义配置操作。

![](images/2023-10-17_10-05-07.jpg)

从这里开始要配置该软件所包含的各个微服务定义，课程配套代码文件夹 course-100 中的 K8s-yaml 子目录提供了所需要的服务定义描述。如果你的项目代码中没有用编写微服务定义文件，可以在这个界面中手工定义。

下面将开始接入你 Fork 到个人账户中的 zadig-training 代码库。

1. 点击这个圆形按钮
2. 开始对接目标代码库（你 GitLab 个人账户中的代码库）

![](images/2023-10-17_10-05-29.jpg)

1. 点击 “代码源” 的下拉菜单，你可以看到系统管理员已经接入了若干可用的代码仓库，而这些不是你个人的代码仓库。
2. 点击 “新增代码源” 按钮
3. 开始接入 GitLab 个人代码仓库

![](images/2023-10-17_10-06-26.jpg)

注意：这个步骤中需要使用上一节中所创建的 GitLab 应用认证密钥对。

1. 选择 Gitlab ，你的个人代码仓库是目标源。
2. 输入 “代码源标识”
3. 输入 ‘Application ID’
4. 输入 ‘Secret’
5. 点击前往授权，页面会跳转到 GitLab 的页面，点击授权按钮后，即完成代码源系统集成操作。
6. 继续后续操作

![](images/2023-10-17_10-07-56.jpg)

在成功的接入了 GitLab 个人代码库之后，可以为当前项目选择使用 Fork 好的代码库。

1. 点击 ‘代码源’ 下拉菜单，选择上一步创建的新的源代码管理系统。
2. 选择自己的 GitLab 账户名
3. 选择使用我们在上一步所 Fork 的代码库 ‘zadig-training’
4. 选择分支
5. 点击选择文件夹按钮，这里是为本产品选择微服务定义描述 yaml 文件。

![](images/2023-10-17_10-09-47.jpg)

1. 选择正确的路径 “course-100/k8s-yaml”
2. 点击 “确定” 按钮。

![](images/2023-10-17_10-10-38.jpg)

1. 这里向导正确的识别出了两个微服务，如果实际项目代码中，不是所有微服务定义文件都在一个文件夹中，则需要重复本步骤，依次添加其他所有服务。
2. 点击 “同步” 按钮，Zadig 将批量导入这些微服务定义。

![](images/2023-10-17_10-14-45.jpg)

1. 点击 backend 服务名称，查看相关定义文件
2. 点击 frontend 服务名称，确认相关定义文件
3. 点击 “下一步” 按钮

![](images/2023-10-17_10-17-11.jpg)

1. 为本产品的两个服务配置开发环境，包括：构建、运行、测试等活动所需要使用的 K8s 集群，容器镜像仓库等。
2. 在服务列表中，由于当前的镜像仓库中，曾经构建过名为 ‘backend’ 和 ‘frontend’ 服务的镜像，因此下拉菜单中有镜像名称，否则此处为空。
3. 在这里输入当前所使用的 Zadig 培训环境的访问入口域名 ‘edu.koderover.com’
4. 点击 qa 环境，检查相关选项，也需要输入访问入口域名 ‘edu.koderover.com’
5. 点击 “创建环境” 按钮

![](images/2023-10-17_10-19-39.jpg)

1. 这个区域显示创建成功
2. 点击 “下一步”

![](images/2023-10-17_10-20-50.jpg)

1. 在这个区域中显示了 Zadig 为当前产品项目所创建的默认工作流，它们具有很好的通用性，可以适用于大多数产品开发。也可以根据需要选择 Zadig 内置的复杂标准工作流，或者定义企业所需要的工作流。
2. 点击 “完成”

### 验收检查

1. 在项目管理界面中点击刚刚创建的项目。在环境信息表格中，dev 和 qa 的环境状态为 ‘正在运行’； 在项目中浏览各个菜单页面，包括：工作流、环境、服务、构建等等。
2. 点击 NEXT 进入下个章节。

<!-- ------------------------ -->
## 定义代码构建
Duration: 5

### 学习目标

* 为前台应用 frontend 配置代码构建
* 为后台应用 backend 配置代码构建
* 为 dev 工作流手工触发构建的运行
* 查看 dev 环境中前台和后台应用的运行状态
* 掌握代码构建定义和持续集成的概念

### 操作流程

点击左侧的 “项目” 菜单，点击上一步初始化的项目，点击 “构建” 标签页，这个页面上是空白的，显示 `暂无可展示的构建，请手动新建构建` ；

![](images/2023-10-17_16-14-30.jpg)

1. 点击项目的 “构建” 标签页，页面上还没有任何代码构建。
2. 点击 “新建构建” 按钮，为前端和后端服务定义构建

![](images/2023-10-17_16-20-30.jpg)

下面开始为 backend 后端服务定义代码构建。

1. 选择默认的 “Zadig构建”方式，点击使用模板复选框，还可以查看 Zadig 的构建模板功能，你可以自定义标准化构建模板。
2. 填写有意义的 “构建名称”
3. 在选择服务菜单中，选中 “backend”。
4. 在基础设施选项， 选中默认的 “Kubernetes”；还可以使用 “主机” 模式，构建基于单机操作系统的应用子服务。
5. 选择操作系统
6. 添加依赖的软件包，选中 “go 1.12.1” ，在下拉菜单中还可以浏览到 Zadig 系统中当前已经定义的各种软件包和构建工具集。你可以根据需求自行定义所需要的软件包。
7. 在这里选择你个人 GitLab 账号中的本课程培训代码仓库，如果是一个复杂的应用，有可能需要点击后方的加号按钮，添加其他的代码仓库，作为需要构建的源代码。
8. 在这里输入后端服务所需要的构建代码，请使用下面的代码片段。
9. 点击 “立即新建” 按钮，完成后端代码构建的定义过程。

```sh
cd zadig-training/course-100/backend
make build-backend

docker build -t $IMAGE -f Dockerfile .
docker push $IMAGE
```

代码片段解释：

* 进入后端应用子目录
* 调用 make 命令，构建该 Golang 项目
* 运行 docker build 命令打包目标镜像
* 用 docker push 命令将镜像推送到项目所指定的镜像仓库

由于 Zadig 系统平台带有丰富的上下文，因此定义构建的工程师不需要了解太多的环境细节，不需要处理镜像仓库的用户名密码等访问细节。

下面为前端应用定义代码构建。

![](images/2023-10-17_16-25-18.jpg)

1. 返回 “构建” 标签页，参考上一步相似的操作，为 frontend 应用定义源代码构建细节。
2. 输入 1 到 3 的相关信息
3. 在第 5 步，并不需要选择任何依赖软件包，你可以查看前端的 Dockerfile 定义文件，这个子服务使用的容器内多阶段构建的风格。
4. 在第 7 步输入下面的代码片段。
5. 点击 “立即新建” 按钮，完成前端代码的构建。

```shell
cd zadig-training/course-100/frontend

docker build -t $IMAGE -f Dockerfile .
docker push $IMAGE
```

代码片段解释：

* 进入前端应用子目录
* 运行 docker build 命令打包目标镜像
* 用 docker push 命令将镜像推送到项目所指定的镜像仓库

对比前后端的构建代码的差异，其实对于不同语言的构建方式而言，在 Zadig 中，用户可以有多种选择方式：

* 本课程中演示的自定义方式，这样的简单的代码片段，完全在 Zadig 的图形界面中做管理，适用于在项目初期，代码构建流程和工具多变，且需要临时调整的情况下。
* 还可以使用 Zadig 所提供的的构建模板方式。如果项目的构建模式比较成熟，且倾向于强制的标准化，可以标准化的完全由 Zadig 所托管的构建模板应对不同子服务代码的构建场景。
* 所有构建命令和脚本还是可以保存在子服务的文件夹中，这样构建脚本的输入框里则只需要输入一条或者多条构建脚本的调用路径即可。这样符合构建脚本的代码和服务源代码都完全受控于代码仓库的管理方式下。

可以根据项目个性和阶段合理灵活的选择构建方式。

![](images/2023-10-17_16-26-51.jpg)

1. 回到 “工作流” 标签页，这里是三条项目初始化向导生成的工作流，还都没有运行过。选择手工触发 dev 工作流的执行。
2. 点击 “执行” 按钮，触发代码构建流程。

![](images/2023-10-17_16-27-40.jpg)

1. 在服务下拉菜单中，同时选中前端和后端服务。
2. 这里不做修改，我们从构建主干代码开始，不同子服务也可以设置相关的自定义变量。
3. 点击 “执行” 按钮。

![](images/2023-10-17_16-28-59.jpg)

当前的工作流在开发环境中开始运行。下面开始详细查看构建过程。

![](images/2023-10-17_16-29-25.jpg)

1. 这个区域显示了当前工作流运行的概况信息
2. 点击服务清单中，backend（backend）前面的右三角图标。
3. 在这里查看构建过程的日志信息，用于排错构建失败的情况。
4. 继续滚动页面，查看下面的前台服务

![](images/2023-10-17_16-30-47.jpg)

1. 查看前端 frontend(frontend) 的构建状态
2. 查看前端基于多阶段 Dockerfile 的构建流程日志
3. 构建之后的子服务都自动化的在当前的 dev 环境中进行了部署，部署状态成功表明，当前子服务的容器运行正常。
4. 将鼠标移动到镜像信息，查看完整的前端子服务打包镜像的位置和名称，Zadig 系统提供了自动化的镜像标签命名

![](images/2023-10-17_16-32-03.jpg)

1. 返回“工作流”标签页，这个区域中显示了该工作流首次运行的结果，以及相关的统计信息。
2. 点击右侧的齿轮图标，浏览 Zadig 平台中所提供的的所有工作流定义选项，默认情况下，Zadig 平台在不同工作流中预制了所必要的操作。


### 验收检查

1. 我们成功的运行了 dev 环境中的开发工作流
2. 前后端子服务都正常的运行起来了
3. 进入下一步


<!-- ------------------------ -->
## 首次调试服务
Duration: 5

### 学习目标

1. 详细查看和熟悉 Zadig 平台的微服务开发运行环境
2. 在开发环境中，手工确认产品的功能是否正常运行，识别产品 bug
3. 开展初步的产品排错调试工作

### 操作步骤

![](images/2023-10-17_16-33-55.jpg)

1. 来到 “环境” 标签页
2. 这里可以看到前后端服务在当前的 dev 环境中所使用的容器镜像
3. 点击这个前端服务入口 URL，可以访问前端访问的页面，校验应用状态。

![](images/2023-10-17_16-39-23.jpg)

前端页面在浏览器中可以正常显示；但是，后端构建时间显示异常。我们发现了这个产品有明显的 bug ，我们要在后续的课程中修复这个 bug。

![](images/2023-10-17_16-39-49.jpg)

1. 首先我们怀疑后端 api 服务工作是否正常，查看环境页面的 dev 环境，发现两个服务当前的容器运行都很正常。
2. 点击 backend 服务的名称，进入这个服务的详细调试页面。

![](images/2023-10-17_16-40-30.jpg)

1. 点击 “实时日志” 查看后端容器的启动日志
2. 点击 “调试”，进入容器的操作系统，自测该程序

![](images/2023-10-17_16-41-10.jpg)

1. 启动日志显示了后台服务的正常启动日志，没有报错信息。
2. 关闭日志查看窗口

![](images/2023-10-17_16-42-35.jpg)

1. 在容器的调试界面中，输入如下的2条命令
2. 确认后端服务的 api 工作是正常的，这里显示了后端服务程序的构建时间戳，说明后端服务没有异常，排除后端服务的问题。

```sh
apt install curl -y
curl localhost:20219/api/buildstamp
```

命令行解释：

* 在后端容器的操作系统中安装 curl 命令行工具
* 用 curl 自测后端服务的 api 功能

### 验收检查

1. 我们熟悉了各个微服务的配置和运行状态查看
2. 进入容器内部调试潜在问题
3. 经过初步排查，排除了后端服务的问题。
4. 下一步修复前端的问题。


<!-- ------------------------ -->
## 修复已知 Bug
Duration: 5

学习目标：

1. 创建修复分支
2. 将构建切换到自动化构建状态
3. 提交新的分支
4. 测试和验证新分支的功能正常与否
5. 提交&合并 MR，完成 bug 修复流程。


### 操作流程

首先，在命令行中创建一个名为 `1-million-bug` 的分支。参考命令如下：

```sh
git branch 1-million-bug
git switch 1-million-bug 
git push origin 1-million-bug
```
![](images/2023-10-17_18-05-18.jpg)

1. 用 vs code 打开源代码目录，浏览前端代码，查看 `HelloWorld_rc.vue` 文件的第45 行。
2. 发现这里调用了错误的后端 api

![](images/2023-10-17_18-06-30.jpg)

1. 定位到这个文件
2. 将 api 名称修改为 `/api/buildstamp`
3. 在 vs code 中保存这个文件
4. 运行下面的参考命令，提交这个修复。

```sh
git add .
git commit -m 'fix 1 million bug'
git push origin 1-million-bug    
```

![](images/2023-10-17_18-10-58.jpg)

1. 在工作流页面，查看 dev 工作流
2. 点击 “执行” 按钮

![](images/2023-10-17_18-11-42.jpg)

1. 在服务选择菜单，选择前端和后端服务。
2. 选择后端使用最新的 `1-million-bug` 分支
3. 选择前端使用最新的 `1-million-bug` 分支
4. 点击 “执行” 按钮，手工触发构建刚才做的修复。

![](images/2023-10-17_18-12-35.jpg)

1. 观察正在运行的工作，注意代码的分支和提交编号
2. 等待两个服务都构建成功

![](images/2023-10-17_18-15-06.jpg)

1. 进入环境页面
2. 点击前端服务入口

![](images/2023-10-17_18-19-27.jpg)

在浏览器中确认，后端服务 api 调用正常的结果，前端页面显示正常。

![](images/2023-10-17_18-24-35.jpg)

在合并代码到主干前，更新开发工作流，将其改为持续构建的自动触发风格。

1. 点击执行按钮后的齿轮按钮，详细配置这个工作流。

![](images/2023-10-17_18-26-17.jpg)

1. 在工作流的详细配置界面中，点击触发器
2. 点击添加配置
3. 填写名称
4. 填写描述
5. 选择代码库
6. 选择目标分支的 “正则表达式配置”，输入 `/*`；触发所有分支的提交
7. 选择自动化构建后的需要部署更新的环境
8. “ 动态选择空闲环境更新 ” ，这个选项会在多个可选的 K8s 环境中自动选择，最空闲的集群。
9. 选择需要部署的目标服务
10. 勾选所有选项
11. 点击“确认”按钮

![](images/2023-10-17_18-26-44.jpg)

1. 查看自动化持续构建和持续集成的触发器配置
2. 点击 “保存” 按钮

![](images/2023-10-17_18-27-13.jpg)

回到 GitLab 代码仓库的页面，点击创建 “Create merge request” 按钮。

![](images/2023-10-17_18-27-30.jpg)

点击 “create merge request” 按钮

![](images/2023-10-17_18-29-12.jpg)

1. 点击 “Merge” 按钮，合并 `1-million-bug` 分支到主干。
2. 在这个页面中观察，Zadig 所触发的工作流开始启动构建，并实时更新状态。
3. 快速回到 Zadig 页面

![](images/2023-10-17_18-30-01.jpg)

点击左侧的第一个状态菜单，观察当前系统中工作流的执行状态。

![](images/2023-10-17_18-30-54.jpg)

1. 回到工作流页面
2. 再点击最新的一次工作流执行编号
3. 观察执行结果，关注代码信息部分

### 验收检查

1. 我们修复了前端的 Bug
2. 配置了自动化触发器，实现了持续构建和持续集成所必要的配置
3. 处理了 MR，将修复合并到主干
4. 进入下一步

<!-- ------------------------ -->
## 管理自动化测试
Duration: 5

### 学习目标

1. 管理测试套件
2. 手动触发测试套件，观察测试结果
3. 配置测试任务的高级选项，定义自动化测试触发器，定时器，和通知策略等。

### 操作步骤

注意：在本课程的代码库中，有一个 `test` 目录；这里存放了若干个用于测试目的的演示脚本。本节的操作会使用到这三个测试脚本。

![](images/2023-10-17_20-21-29.jpg)

1. 进入 “测试” 标签页
2. 点击 “新建测试” 按钮

![](images/2023-10-17_20-44-16.jpg)

1. 在这个界面中输入相关信息，测试名称 “unit-test”
2. 选择测试代码运行所需要运行的操作系统 “ubuntu 20.04”
3. 选择代码源，这里存放这测试脚本的代码
4. 在测试脚本中输入下面的代码片段
5. 在测试报告的所在目录中输入测试结果的输出路径 `zadig-training/course-100/test/test-report`
6. 最后点击 “确认” 按钮

测试代码片段如下：

```sh
cd zadig-training/course-100/test/
chmod +x init.sh
./init.sh
```

测试脚本的管理逻辑和构建代码类似。可以符合各种风格的测试代码管理。

![](images/2023-10-17_20-35-16.jpg)

1. 重复上一步的操作，创建 “init-test” 测试套件。
2. 重复上一步的操作，创建 “perf-test” 测试套件。
3. 手工触发 unit-test
4. 手工触发 init-test
5. 手工触发 perf-test
6. 观察测试结果

![](images/2023-10-17_20-35-27.jpg)

1. 在测试管理页面中，点击 unit-test 测试，查看测试详情
2. 这里可以看到每一次测试代码运行的详细日志
3. 点击测试报告，查看测试报告详情

![](images/2023-10-17_20-35-43.jpg)

这里可以查看和分析测试的具体情况。

![](images/2023-10-17_20-37-43.jpg)

1. 点击 unit-test 套件右侧的 加号➕ 按钮，将此产品的 qa 和 dev 工作流进行强关联。
2. 点击 init-test 套件右侧的 加号➕ 按钮，将此产品的 qa 和 dev 工作流进行强关联。
3. 点击 perf-test 套件右侧的 加号➕ 按钮，将此产品的 qa 和 ops 工作流进行强关联。

这样在 dev、 qa 和 ops 工作流触发的时候，这些绑定的测试套件就强制触发运行。

![](images/2023-10-17_20-38-08.jpg)

1. 进入 "工作流" 页面，这个区域是与此工作流绑定的测试套件清单。
2. 点击 dev 工作流右侧的 “执行” 按钮，手工测试此工作流。

![](images/2023-10-17_20-38-26.jpg)

1. 在服务中选择前端和后端服务， 我们可以看到这里有若干与之强关联的测试套件，他们必须被触发。
2. 点击 “执行” 按钮，观察此工作流执行后绑定的测试套件的执行。

![](images/2023-10-17_20-39-25.jpg)

1. 进入测试管理页面，点击 unit-test 测试套件右端的齿轮 ⚙ 按钮，进入测试的高级配置选项。
2. 点击代码变更触发的“添加”按钮
3. 选择代码库，当此代码库发生了变更时，unit-test 测试套件会被触发执行。
4. 选择目标分支为 main
5. 选择各种需要配置的触发事件
6. 点击 “确定” 按钮

![](images/2023-10-17_20-42-00.jpg)

1. 详细查看测试的运行策略和资源配置，测试代码的运行可以在一个特定的 K8s 集群中，可以是特定的资源配置。
2. 这里是刚刚配置的代码变更触发器。
3. 点击添加配置定时触发测试套件运行的策略。
4. 点击通知类型的添加按钮，这里可以配置飞书、钉钉、微信等多种及时通讯配置方式
5. 点击下面的确认修改按钮保存这个配置
6. 测试以上的配置是否生效

### 验收检查

1. 可以手工配置测试套件的执行策略
2. 可以将测试套件与相关工作流绑定
3. 掌握了测试套件的高级配置策略，从而完成了自动化测试的触发和通知。


<!-- ------------------------ -->
## 发布新版本
Duration: 5

### 学习目标

1. 先用 qa 工作流，在 qa 环境中全面测试和确认一个即将发布的版本
2. 使用内置的 ops 工作流，进行打版相关的验证操作
3. 定义当前最新版本为候选生产版本

注意：为了降低环境准备的需求，打版的测试工作，我们复用了 qa 环境；在真实的场景中，我们可能会使用到预生产环境或者生产环境。而下面的工作流程是通用的。

### 操作步骤

![](images/2023-10-17_22-32-02.jpg)

1. 在工作流页面，选择使用 qa 工作流
2. 点击 “执行” 按钮

![](images/2023-10-17_22-32-16.jpg)

1. 选择前端和后端服务
2. 选择主干服务
3. 这里是强制关联触发的测试套件
4. 点击“执行” 按钮

![](images/2023-10-17_22-33-26.jpg)

1. 观察执行的结果，确认分支和最后提交的细节
2. 确认服务都可以在环境中构建并正常运行
3. 确认所有测试套件结果都正常

![](images/2023-10-17_22-33-45.jpg)

1. 进入环境页面，查看所使用的 qa 环境，观察这里的前台和后台服务的运行状态
2. 记录这个最新版本的刚刚构建的镜像的标签，备用。
3. 点击这个服务的入口地址，手工再次确认，前端页面是否现实正常。

![](images/2023-10-17_22-34-29.jpg)

1. 进入工作流页面，选择 ops 工作流
2. 点击 “执行” 按钮

![](images/2023-10-17_22-35-59.jpg)

1. 这里选择 qa 环境；由于我们还没有定义 预生产、生产 等其它用于预发布版本测试的环境，所以这里使用 qa 代替。
2. 选择前端和后端服务
3. 这里选择之前步骤中记录的镜像标签
4. 勾选 “创建版本”； 这样我们就锁定了当前代码的版本和产出物（容器镜像）等细节。
5. 输入版本号
6. 输入版本描述信息
7. 输入标签
8. 这里是强制关联的测试套件
9. 点击 “执行” 按钮


![](images/2023-10-17_22-36-26.jpg)


1. 这里是目标版本的构建和运行结果
2. 确认测试套件的结果
3. 点击 “交付清单” 后面的链接


![](images/2023-10-17_22-36-54.jpg)

1. 这样我们来到了 版本管理 页面
2. 这里是版本描述信息
3. 这里是容器镜像仓库中的镜像信息
4. 这里是微服务的启动顺序
5. 点击 “版本发布” 按钮

![](images/2023-10-17_22-37-16.jpg)

1. 选择发布的目标环境，这里没有合适的发布环境，发布流程超出本课程的教学范围，所以我们结束打版流程，尚未在相关环境中部署运行。
2. 点击此处，关闭窗口，阶段性的结束发布流程。

![](images/2023-10-17_22-37-31.jpg)

1. 进入 版本管理 界面
2. 确认我们所创建的这个预发布生产版本。此时我们已经为启动发布流程做好了准备。

### 验收检查

1. 掌握了版本发布前的测试验证流程
2. 掌握了在 Zadig 平台中的打版操作
3. 这是产品正式发布的起点，后续课程更加精彩，本系列课程未完待续。

<!-- ------------------------ -->
## 扩展补充
Duration: 5

### 参考链接 

相关文档链接：

1. 官网文档 <https://docs.koderover.com/>
2. 论坛 <https://community.koderover.com/>

### 课程支持

扫描下方二维码，进入本课程专属微信群。

![](images/course-support.png)
扫码进入课程支持群

![](images/pre-sales.jpg)
扫码联系 Zadig 售前

![](images/wc-KodeRover.jpg)
扫码关注 KodeRover 微信公众号


### 彩蛋

本示例代码中还有一个隐藏的 Bug，如果您能将其消除，并在截图证明你的修复过程和成果。请联系本系列课程的官方课程支持助理，我们对捉虫高手不定期的派发 Zadig 产品周边社区伴手礼。

感谢学习本课程，后续课程更加精彩，敬请关注。
